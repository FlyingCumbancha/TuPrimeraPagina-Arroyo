{% extends 'base.html' %}
{% block title %}Crear Nuevo Post - Mi Blog Personal{% endblock %}
{% block content %}

<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card border-0 shadow-lg">
        <div class="card-header bg-transparent border-0 text-center py-4">
          <h2 class="mb-0">
            <span class="me-3" style="background: var(--primary-gradient); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;">‚úçÔ∏è</span>
            Crear Nuevo Post
          </h2>
          <p class="text-muted mt-2">Comparte tus ideas con el mundo</p>
        </div>
        
        <div class="card-body p-5">
          <form method="post" class="needs-validation" novalidate>
            {% csrf_token %}
            
            <div class="row g-4">
              <div class="col-12">
                <label for="{{ form.titulo.id_for_label }}" class="form-label fw-semibold">
                  <span class="me-2 text-primary">üìù</span>T√≠tulo del Post
                </label>
                {{ form.titulo }}
                <div class="form-text">Un t√≠tulo atractivo que capture la atenci√≥n de tus lectores</div>
              </div>
              
              <div class="col-md-6">
                <label for="{{ form.autor.id_for_label }}" class="form-label fw-semibold">
                  <span class="me-2 text-primary">üë§</span>Autor
                </label>
                {{ form.autor }}
                <div class="form-text">Selecciona el autor del post</div>
              </div>
              
              <div class="col-md-6">
                <label for="{{ form.categoria.id_for_label }}" class="form-label fw-semibold">
                  <span class="me-2 text-primary">üè∑Ô∏è</span>Categor√≠a
                </label>
                {{ form.categoria }}
                <div class="form-text">Elige una categor√≠a apropiada</div>
              </div>
              
              <div class="col-12">
                <label for="{{ form.contenido.id_for_label }}" class="form-label fw-semibold">
                  <span class="me-2 text-primary">üìÑ</span>Contenido
                </label>
                {{ form.contenido }}
                <div class="form-text">Escribe el contenido completo de tu post. Puedes usar p√°rrafos separados por l√≠neas vac√≠as</div>
              </div>
              
              <div class="col-12">
                <div class="form-check form-switch">
                  {{ form.publicado }}
                  <label class="form-check-label fw-semibold" for="{{ form.publicado.id_for_label }}">
                    <span class="me-2 text-success">üëÅÔ∏è</span>Publicar inmediatamente
                  </label>
                  <div class="form-text">Si est√° activado, el post ser√° visible p√∫blicamente</div>
                </div>
              </div>
            </div>
            
            <hr class="my-4">
            
            <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">
              <a href="{% url 'home' %}" class="btn btn-outline-secondary">
                <span class="me-2">‚ùå</span>Cancelar
              </a>
              
              <div class="d-flex gap-2">
                <button type="submit" name="draft" class="btn btn-outline-primary">
                  <span class="me-2">üíæ</span>Guardar Borrador
                </button>
                <button type="submit" class="btn btn-success">
                  <span class="me-2">üöÄ</span>Publicar Post
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
      
      <!-- Tips para escribir -->
      <div class="mt-4">
        <div class="card border-0" style="background: rgba(255,255,255,0.8);">
          <div class="card-body">
            <h6 class="fw-bold mb-3">
              <span class="text-warning me-2">üí°</span>Tips para escribir un gran post
            </h6>
            <ul class="list-unstyled mb-0">
              <li class="mb-2"><span class="text-success me-2">‚úÖ</span>Usa un t√≠tulo claro y descriptivo</li>
              <li class="mb-2"><span class="text-success me-2">‚úÖ</span>Estructura tu contenido en p√°rrafos</li>
              <li class="mb-2"><span class="text-success me-2">‚úÖ</span>Elige la categor√≠a m√°s apropiada</li>
              <li><span class="text-success me-2">‚úÖ</span>Revisa tu ortograf√≠a antes de publicar</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.form-control, .form-select {
  border: 2px solid #e9ecef;
  border-radius: 12px;
  padding: 12px 16px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.form-control:focus, .form-select:focus {
  border-color: #667eea;
  box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
}

.form-label {
  color: #495057;
  margin-bottom: 8px;
}

.form-text {
  color: #6c757d;
  font-size: 0.875rem;
}

.form-check-input:checked {
  background-color: #667eea;
  border-color: #667eea;
}

.form-check-input:focus {
  box-shadow: 0 0 0 0.25rem rgba(102, 126, 234, 0.25);
}

textarea.form-control {
  min-height: 200px;
  resize: vertical;
}

.needs-validation .form-control:invalid {
  border-color: #dc3545;
}

.needs-validation .form-control:valid {
  border-color: #28a745;
}
</style>

<script>
// Validaci√≥n de formulario
(function() {
  'use strict';
  
  const form = document.querySelector('.needs-validation');
  
  form.addEventListener('submit', function(event) {
    if (!form.checkValidity()) {
      event.preventDefault();
      event.stopPropagation();
    }
    
    form.classList.add('was-validated');
  }, false);
})();

// Auto-resize del textarea
document.addEventListener('DOMContentLoaded', function() {
  const textarea = document.querySelector('textarea');
  if (textarea) {
    textarea.addEventListener('input', function() {
      this.style.height = 'auto';
      this.style.height = (this.scrollHeight) + 'px';
    });
  }
});
</script>

{% endblock %}
